!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Context2DTracked=e():t.Context2DTracked=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){return t[t.length-1]}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2).Matrix;t.exports=function(){function t(e){r(this,t),this.context=e,this.tf=[new s(e)],this.penx=0,this.peny=0,this.justBegun=!1,this.bpenx=0,this.bpeny=0,this.ox=0,this.oy=0,this.showcontrol=!1;for(var n=["webkitImageSmoothingEnabled"],o=Object.getOwnPropertyNames(e.__proto__),i=0;i<o.length;i++){var a=o[i];n.indexOf(a)>=0||("function"==typeof e[a]?void 0===this[a]&&(this[a]=e[a].bind(e)):Object.defineProperty(this,a,{get:function(t){return e[t]}.bind(null,a),set:function(t,n){return e[t]=n}.bind(null,a)}))}}return i(t,[{key:"trace",value:function(){var t=this.penx,e=this.peny;return console.log(Math.round(10*t)/10+this.ox,Math.round(10*e)/10+this.oy),this.context.moveTo(t-5,e),this.context.lineTo(t+5,e),this.context.moveTo(t,e+5),this.context.lineTo(t,e-5),this.context.moveTo(t,e),{x:t,y:e}}},{key:"transformPoint",value:function(t,e){return o(this.tf).inverse().applyToPoint(t,e)}},{key:"save",value:function(){this.tf.push(o(this.tf).clone()),this.context.save()}},{key:"restore",value:function(){this.tf.pop(),this.context.restore()}},{key:"scale",value:function(t,e){o(this.tf).scale(t,e)}},{key:"translate",value:function(t,e){o(this.tf).translate(t,e)}},{key:"setTransform",value:function(t,e,n,r,i,s){o(this.tf).setTransform(t,e,n,r,i,s)}},{key:"rotate",value:function(t){o(this.tf).rotate(t)}},{key:"movePen",value:function(t,e){this.justBegun&&(this.justBegun=!1,this.bpenx=t,this.bpeny=e),this.penx=t,this.peny=e}},{key:"beginPath",value:function(){this.justBegun=!0,this.context.beginPath()}},{key:"moveTo",value:function(t,e){this.movePen(t,e),this.context.moveTo(t,e)}},{key:"lineTo",value:function(t,e,n){if(n||this.showcontrol){var r=Object.assign(this._getDefaultDebugOptions(),n);this._drawCurveControl(this._getDebugPoint(t,e),r)}this.context.lineTo(t,e),this.movePen(t,e)}},{key:"bezierCurveTo",value:function(t,e,n,r,o,i,s){if(s||this.showcontrol){var a=Object.assign(this._getDefaultDebugOptions(),s);this._drawCurveControl(this._getDebugPoint(o,i,t,e,n,r),a)}this.context.bezierCurveTo(t,e,n,r,o,i),this.movePen(o,i)}},{key:"quadraticCurveTo",value:function(t,e,n,r,o){if(o||this.showcontrol){var i=Object.assign(this._getDefaultDebugOptions(),o);this._drawCurveControl(this._getDebugPoint(n,r,t,e),i)}this.context.quadraticCurveTo(t,e,n,r),this.movePen(n,r)}},{key:"arc",value:function(t,e,n,r,o,i){var s=t+Math.cos(r)*n,a=e+Math.sin(r)*n;this.movePen(s,a),this.context.arc(t,e,n,r,o,i);var u=t+Math.cos(o)*n,c=e+Math.sin(o)*n;this.movePen(u,c),this.bpenx=u,this.bpeny=c}},{key:"ellipse",value:function(t,e,n,r,o,i,s,a){this.context.ellipse?this.context.ellipse.apply(this.context,arguments):(this.save(),this.translate(t,e),this.rotate(o),this.scale(n,r),this.arc(0,0,1,i,s,a),this.restore())}},{key:"arcTo",value:function(t,e,n,r,o){this.context.arcTo(t,e,n,r,o)}},{key:"stroke",value:function(){"rgba(0, 0, 0, 0)"!==this.context.strokeStyle&&this.context.stroke()}},{key:"fill",value:function(){this.movePen(this.bpenx,this.bpeny),this.context.fill.apply(this.context,arguments)}},{key:"clip",value:function(){this.movePen(this.bpenx,this.bpeny),this.context.clip.apply(this.context,arguments)}},{key:"_drawCurveControl",value:function(t,e){this.context.save();var n=[t.p1];this.context.strokeStyle=e.controlLine.color,this.context.lineWidth=e.controlLine.width,t.cp1&&(this.context.moveTo(t.p1.x,t.p1.y),this.context.lineTo(t.cp1.x,t.cp1.y),n.push(t.cp1),t.cp2?(this.context.lineTo(t.cp2.x,t.cp2.y),this.context.lineTo(t.p2.x,t.p2.y),n.push(t.cp2)):this.context.lineTo(t.p2.x,t.p2.y)),this.context.stroke(),n.push(t.p2);for(var r=0;r<n.length;++r){var o=n[r];n[r]="("+Math.round(10*n[r].x)/10+", "+Math.round(10*n[r].y)/10+")",this.context.lineWidth=e.point.width,o===t.p2?this.context.strokeStyle=e.point.destinationColor:this.context.strokeStyle=e.point.color,this.context.fillStyle=e.point.fill,this.context.beginPath(),this.context.arc(o.x,o.y,e.point.radius,0,2*Math.PI,!0),this.context.fill(),this.context.stroke()}console.log("from points",n.join(" to ")),this.context.restore(),this.context.beginPath(),this.context.moveTo(t.p1.x,t.p1.y)}},{key:"_getDebugPoint",value:function(t,e,n,r,o,i){var s={p1:{x:this.penx,y:this.peny},p2:{x:t,y:e}};return"number"==typeof n&&"number"==typeof r&&(s.cp1={x:n,y:r},"number"==typeof o&&"number"==typeof i&&(s.cp2={x:o,y:i})),s}},{key:"_getDefaultDebugOptions",value:function(){return{controlLine:{color:"rgb(200,100,100)",width:.5},point:{color:"rgb(200,50,50)",destinationColor:"#000",fill:"white",width:1,radius:1}}}}]),t}()},function(t,e,n){"use strict";t.exports=n(0)},function(t,e,n){function r(t,e){var n,r=this;r._t=r.transform,r.a=r.d=1,r.b=r.c=r.e=r.f=0,t&&(r.context=t).setTransform(1,0,0,1,0,0),Object.defineProperty(r,"element",{get:function(){return n},set:function(t){n||(r._px=r._getPX(),r.useCSS3D=!1),n=t,(r._st=n.style)[r._px]=r.toCSS()}}),e&&(r.element=e)}r.fromTriangles=function(t,e,n){var o,i,s,a,u,c,h=new r,f=new r(n);return Array.isArray(t)?"number"==typeof t[0]?(s=t[4],a=t[5],u=e[4],c=e[5],o=[t[0]-s,t[1]-a,t[2]-s,t[3]-a,s,a],i=[e[0]-u,e[1]-c,e[2]-u,e[3]-c,u,c]):(s=t[2].x,a=t[2].y,u=e[2].x,c=e[2].y,o=[t[0].x-s,t[0].y-a,t[1].x-s,t[1].y-a,s,a],i=[e[0].x-u,e[0].y-c,e[1].x-u,e[1].y-c,u,c]):(o=[t.px-t.rx,t.py-t.ry,t.qx-t.rx,t.qy-t.ry,t.rx,t.ry],i=[e.px-e.rx,e.py-e.ry,e.qx-e.rx,e.qy-e.ry,e.rx,e.ry]),h.setTransform.apply(h,o),f.setTransform.apply(f,i),f.multiply(h.inverse())},r.fromSVGTransformList=function(t,e,n){for(var o=new r(e,n),i=0;i<t.length;)o.multiply(t[i++].matrix);return o},r.from=function(t,e,n,o,i,s,a,u){var c,h,f,l=new r(a,u);if("number"==typeof t)l.setTransform(t,e,n,o,i,s);else if("number"==typeof t.x)f=Math.sqrt(t.x*t.x+t.y*t.y),c=h=1,o?c=f:h=f,l.translate(e||0,n||0).rotateFromVector(t).scaleU(c).translate(h,0);else{if("boolean"==typeof t.is2D&&!t.is2D)throw"Cannot use 3D DOMMatrix.";e&&(l.context=e),n&&(l.element=n),l.multiply(t)}return l},r.prototype={_getPX:function(){for(var t,e=["t","oT","msT","mozT","webkitT","khtmlT"],n=0,r=document.createElement("div").style;t=e[n++];)if(void 0!==r[t+"ransform"])return t+"ransform"},concat:function(t){return this.clone().multiply(t)},flipX:function(){return this._t(-1,0,0,1,0,0)},flipY:function(){return this._t(1,0,0,-1,0,0)},reflectVector:function(t,e){var n=this.applyToPoint(0,1),r=2*(n.x*t+n.y*e);return t-=r*n.x,e-=r*n.y,{x:t,y:e}},reset:function(){return this.setTransform(1,0,0,1,0,0)},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return this._t(e,n,-n,e,0,0)},rotateFromVector:function(t,e){return this.rotate("number"==typeof t?Math.atan2(e,t):Math.atan2(t.y,t.x))},rotateDeg:function(t){return this.rotate(t*Math.PI/180)},scaleU:function(t){return this._t(t,0,0,t,0,0)},scale:function(t,e){return this._t(t,0,0,e,0,0)},scaleX:function(t){return this._t(t,0,0,1,0,0)},scaleY:function(t){return this._t(1,0,0,t,0,0)},scaleFromVector:function(t,e){return this.scaleU(Math.sqrt(t*t+e*e))},shear:function(t,e){return this._t(1,e,t,1,0,0)},shearX:function(t){return this._t(1,0,t,1,0,0)},shearY:function(t){return this._t(1,t,0,1,0,0)},skew:function(t,e){return this.shear(Math.tan(t),Math.tan(e))},skewDeg:function(t,e){return this.shear(Math.tan(t/180*Math.PI),Math.tan(e/180*Math.PI))},skewX:function(t){return this.shearX(Math.tan(t))},skewY:function(t){return this.shearY(Math.tan(t))},setTransform:function(t,e,n,r,o,i){var s=this;return s.a=t,s.b=e,s.c=n,s.d=r,s.e=o,s.f=i,s._x()},translate:function(t,e){return this._t(1,0,0,1,t,e)},translateX:function(t){return this._t(1,0,0,1,t,0)},translateY:function(t){return this._t(1,0,0,1,0,t)},transform:function(t,e,n,r,o,i){var s=this,a=s.a,u=s.b,c=s.c,h=s.d,f=s.e,l=s.f;return s.a=a*t+c*e,s.b=u*t+h*e,s.c=a*n+c*r,s.d=u*n+h*r,s.e=a*o+c*i+f,s.f=u*o+h*i+l,s._x()},multiply:function(t){return this._t(t.a,t.b,t.c,t.d,t.e,t.f)},divide:function(t){return this.multiply(t.inverse())},divideScalar:function(t){var e=this;if(!t)throw"Division on zero";return e.a/=t,e.b/=t,e.c/=t,e.d/=t,e.e/=t,e.f/=t,e._x()},inverse:function(t,e){var n=this,o=new r(t?n.context:null,e?n.element:null),i=n.determinant();if(n._q(i,0))throw"Matrix not invertible.";return o.a=n.d/i,o.b=-n.b/i,o.c=-n.c/i,o.d=n.a/i,o.e=(n.c*n.f-n.d*n.e)/i,o.f=-(n.a*n.f-n.b*n.e)/i,o},interpolate:function(t,e,n,o){var i=this,s=new r(n,o);return s.a=i.a+(t.a-i.a)*e,s.b=i.b+(t.b-i.b)*e,s.c=i.c+(t.c-i.c)*e,s.d=i.d+(t.d-i.d)*e,s.e=i.e+(t.e-i.e)*e,s.f=i.f+(t.f-i.f)*e,s._x()},interpolateAnim:function(t,e,n,o){var i=new r(n,o),s=this.decompose(),a=t.decompose(),u=s.translate,c=a.translate,h=s.scale;return i.translate(u.x+(c.x-u.x)*e,u.y+(c.y-u.y)*e),i.rotate(s.rotation+(a.rotation-s.rotation)*e),i.scale(h.x+(a.scale.x-h.x)*e,h.y+(a.scale.y-h.y)*e),i._x()},decompose:function(t){var e=this,n=e.a,r=e.b,o=e.c,i=e.d,s=Math.acos,a=Math.atan,u=Math.sqrt,c=Math.PI,h={x:e.e,y:e.f},f=0,l={x:1,y:1},p={x:0,y:0},x=n*i-r*o;if(t)n?(p={x:a(o/n),y:a(r/n)},l={x:n,y:x/n}):r?(f=.5*c,l={x:r,y:x/r},p.x=a(i/r)):(l={x:o,y:i},p.x=.25*c);else if(n||r){var y=u(n*n+r*r);f=r>0?s(n/y):-s(n/y),l={x:y,y:x/y},p.x=a((n*o+r*i)/(y*y))}else if(o||i){var v=u(o*o+i*i);f=.5*c-(i>0?s(-o/v):-s(o/v)),l={x:x/v,y:v},p.y=a((n*o+r*i)/(v*v))}else l={x:0,y:0};return{translate:h,rotation:f,scale:l,skew:p}},determinant:function(){return this.a*this.d-this.b*this.c},applyToPoint:function(t,e){var n=this;return{x:t*n.a+e*n.c+n.e,y:t*n.b+e*n.d+n.f}},applyToArray:function(t){var e,n,r=0,o=[];if("number"==typeof t[0])for(n=t.length;r<n;)e=this.applyToPoint(t[r++],t[r++]),o.push(e.x,e.y);else for(;e=t[r++];)o.push(this.applyToPoint(e.x,e.y));return o},applyToTypedArray:function(t,e){for(var n,r=0,o=t.length,i=e?new Float64Array(o):new Float32Array(o);r<o;)n=this.applyToPoint(t[r],t[r+1]),i[r++]=n.x,i[r++]=n.y;return i},applyToContext:function(t){var e=this;return t.setTransform(e.a,e.b,e.c,e.d,e.e,e.f),e},applyToElement:function(t,e){var n=this;return n._px||(n._px=n._getPX()),t.style[n._px]=e?n.toCSS3D():n.toCSS(),n},applyToObject:function(t){var e=this;return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,e},isIdentity:function(){var t=this;return t._q(t.a,1)&&t._q(t.b,0)&&t._q(t.c,0)&&t._q(t.d,1)&&t._q(t.e,0)&&t._q(t.f,0)},isInvertible:function(){return!this._q(this.determinant(),0)},isValid:function(){return!(this.a*this.d)},isEqual:function(t){var e=this,n=e._q;return n(e.a,t.a)&&n(e.b,t.b)&&n(e.c,t.c)&&n(e.d,t.d)&&n(e.e,t.e)&&n(e.f,t.f)},clone:function(t){return new r(t?null:this.context).multiply(this)},toArray:function(){var t=this;return[t.a,t.b,t.c,t.d,t.e,t.f]},toTypedArray:function(t){var e=t?new Float64Array(6):new Float32Array(6),n=this;return e[0]=n.a,e[1]=n.b,e[2]=n.c,e[3]=n.d,e[4]=n.e,e[5]=n.f,e},toCSS:function(){return"matrix("+this.toArray()+")"},toCSS3D:function(){var t=this;return"matrix3d("+t.a+","+t.b+",0,0,"+t.c+","+t.d+",0,0,0,0,1,0,"+t.e+","+t.f+",0,1)"},toJSON:function(){var t=this;return'{"a":'+t.a+',"b":'+t.b+',"c":'+t.c+',"d":'+t.d+',"e":'+t.e+',"f":'+t.f+"}"},toString:function(t){var e=this;return t=t||4,"a="+e.a.toFixed(t)+" b="+e.b.toFixed(t)+" c="+e.c.toFixed(t)+" d="+e.d.toFixed(t)+" e="+e.e.toFixed(t)+" f="+e.f.toFixed(t)},toCSV:function(){return this.toArray().join()+"\r\n"},toDOMMatrix:function(){var t=null;return"DOMMatrix"in window&&((t=new DOMMatrix).a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.e=this.e,t.f=this.f),t},toSVGMatrix:function(){var t=this,e=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=null;return e&&((n=e.createSVGMatrix()).a=t.a,n.b=t.b,n.c=t.c,n.d=t.d,n.e=t.e,n.f=t.f),n},_q:function(t,e){return Math.abs(t-e)<1e-14},_x:function(){var t=this;return t.context&&t.context.setTransform(t.a,t.b,t.c,t.d,t.e,t.f),t._st&&(t._st[t._px]=t.useCSS3D?t.toCSS3D():t.toCSS()),t}},e.Matrix=r}])});